2025-02-20 08:56:12,837 - __main__ - INFO - Starting experiment with timestamp: 20250220_085612
2025-02-20 08:56:12,838 - __main__ - INFO - Input file: /home/dsg/vortex/PRODUCTION/DATA/raw/input_data.xlsx
2025-02-20 08:56:12,838 - __main__ - INFO - Output directory: outputs/experiment_20250220_085612
2025-02-20 08:56:12,838 - __main__ - INFO - Starting data preprocessing...
2025-02-20 08:56:14,761 - src.preprocessing.data_processor - INFO - Datos cargados exitosamente: (1816, 67)
2025-02-20 08:56:14,767 - src.preprocessing.data_processor - INFO - Encontrados 14 IDs duplicados
2025-02-20 08:56:14,768 - src.preprocessing.data_processor - INFO - Registros únicos después de eliminar duplicados: 1802
2025-02-20 08:56:14,770 - src.preprocessing.data_processor - INFO - Eliminando 6 clases con menos de 10 casos
2025-02-20 08:56:14,773 - src.preprocessing.data_processor - INFO - División de datos - Entrenamiento: (1600, 47), Validación: (178, 47)
2025-02-20 08:56:14,850 - src.preprocessing.data_processor - INFO - Datos balanceados - Shape final: (2256, 46)
2025-02-20 08:56:16,995 - src.preprocessing.data_processor - INFO - Datos de entrenamiento guardados en outputs/experiment_20250220_085612/data/processed/training_data_20250220_085612.xlsx
2025-02-20 08:56:17,155 - src.preprocessing.data_processor - INFO - Datos de validación guardados en outputs/experiment_20250220_085612/data/processed/validation_data_20250220_085612.xlsx
2025-02-20 08:56:17,156 - __main__ - INFO - Starting model training...
2025-02-20 08:56:17,156 - src.training.model_trainer - INFO - Configuring training experiment...
2025-02-20 08:56:20,283 - src.training.model_trainer - INFO - Experiment configured successfully
2025-02-20 08:56:20,283 - src.training.model_trainer - INFO - Starting model training...
2025-02-20 08:56:30,944 - src.training.model_trainer - INFO - Optimizing hyperparameters...
2025-02-20 08:56:43,663 - src.training.model_trainer - INFO - Saving tuned model before calibration...
2025-02-20 08:56:43,880 - src.training.model_trainer - INFO - Calibrating model probabilities...
2025-02-20 08:57:05,277 - src.training.model_trainer - INFO - Training completed successfully
2025-02-20 08:57:05,277 - src.training.model_trainer - INFO - Evaluating model on validation data...
2025-02-20 08:57:06,336 - src.training.model_trainer - INFO - Evaluation completed
2025-02-20 08:57:06,336 - __main__ - INFO - Starting model training...
2025-02-20 08:57:06,337 - src.training.model_trainer - INFO - Configuring training experiment...
2025-02-20 08:57:07,138 - src.training.model_trainer - INFO - Experiment configured successfully
2025-02-20 08:57:07,139 - src.training.model_trainer - INFO - Starting model training...
2025-02-20 08:57:11,510 - src.training.model_trainer - INFO - Optimizing hyperparameters...
2025-02-20 08:57:24,782 - src.training.model_trainer - INFO - Saving tuned model before calibration...
2025-02-20 08:57:24,999 - src.training.model_trainer - INFO - Calibrating model probabilities...
2025-02-20 08:57:47,331 - src.training.model_trainer - INFO - Training completed successfully
2025-02-20 08:57:47,331 - src.training.model_trainer - INFO - Evaluating model on validation data...
2025-02-20 08:57:48,351 - src.training.model_trainer - INFO - Evaluation completed
2025-02-20 08:57:48,351 - __main__ - INFO - Starting feature importance analysis...
2025-02-20 08:57:48,352 - __main__ - INFO - Retrieving tuned model for feature importance analysis...
2025-02-20 08:57:48,353 - __main__ - INFO - Running feature importance analysis...
2025-02-20 08:57:48,353 - src.analysis.feature_importance_analyzer - INFO - Starting feature importance analysis...
2025-02-20 08:57:48,353 - src.analysis.feature_importance_analyzer - INFO - Data shape: X=(2256, 45), y=(2256,)
2025-02-20 08:57:48,353 - src.analysis.feature_importance_analyzer - INFO - Output directory: outputs/experiment_20250220_085612
2025-02-20 08:57:48,353 - src.analysis.feature_importance_analyzer - INFO - Calculating Random Forest feature importance...
2025-02-20 08:57:48,391 - src.analysis.feature_importance_analyzer - INFO - Creating feature importance plot...
2025-02-20 08:57:48,392 - src.analysis.feature_importance_analyzer - INFO - Creating feature importance dot plot...
2025-02-20 08:57:49,252 - src.analysis.feature_importance_analyzer - INFO - Feature importance plot saved successfully
2025-02-20 08:57:49,253 - src.analysis.feature_importance_analyzer - INFO - Starting RFECV analysis...
2025-02-20 08:57:49,253 - src.analysis.feature_importance_analyzer - INFO - Running RFECV with 10 iterations...
2025-02-20 08:57:49,253 - src.analysis.feature_importance_analyzer - INFO - RFECV iteration 1/10
2025-02-20 08:59:30,246 - src.analysis.feature_importance_analyzer - INFO - Iteration 1 completed: selected 33 features
2025-02-20 08:59:30,248 - src.analysis.feature_importance_analyzer - INFO - RFECV iteration 2/10
2025-02-20 09:01:29,493 - src.analysis.feature_importance_analyzer - INFO - Iteration 2 completed: selected 29 features
2025-02-20 09:01:29,493 - src.analysis.feature_importance_analyzer - INFO - RFECV iteration 3/10
2025-02-20 09:03:13,553 - src.analysis.feature_importance_analyzer - INFO - Iteration 3 completed: selected 33 features
2025-02-20 09:03:13,554 - src.analysis.feature_importance_analyzer - INFO - RFECV iteration 4/10
2025-02-20 09:05:04,192 - src.analysis.feature_importance_analyzer - INFO - Iteration 4 completed: selected 35 features
2025-02-20 09:05:04,192 - src.analysis.feature_importance_analyzer - INFO - RFECV iteration 5/10
2025-02-20 09:07:04,579 - src.analysis.feature_importance_analyzer - INFO - Iteration 5 completed: selected 39 features
2025-02-20 09:07:04,582 - src.analysis.feature_importance_analyzer - INFO - RFECV iteration 6/10
2025-02-20 09:08:45,460 - src.analysis.feature_importance_analyzer - INFO - Iteration 6 completed: selected 42 features
2025-02-20 09:08:45,461 - src.analysis.feature_importance_analyzer - INFO - RFECV iteration 7/10
2025-02-20 09:10:47,245 - src.analysis.feature_importance_analyzer - INFO - Iteration 7 completed: selected 34 features
2025-02-20 09:10:47,246 - src.analysis.feature_importance_analyzer - INFO - RFECV iteration 8/10
2025-02-20 09:12:35,862 - src.analysis.feature_importance_analyzer - INFO - Iteration 8 completed: selected 35 features
2025-02-20 09:12:35,863 - src.analysis.feature_importance_analyzer - INFO - RFECV iteration 9/10
2025-02-20 09:14:36,389 - src.analysis.feature_importance_analyzer - INFO - Iteration 9 completed: selected 35 features
2025-02-20 09:14:36,390 - src.analysis.feature_importance_analyzer - INFO - RFECV iteration 10/10
2025-02-20 09:16:39,143 - src.analysis.feature_importance_analyzer - INFO - Iteration 10 completed: selected 35 features
2025-02-20 09:16:39,352 - src.analysis.feature_importance_analyzer - INFO - Creating RFECV plot...
2025-02-20 09:16:40,727 - src.analysis.feature_importance_analyzer - INFO - RFECV plot saved successfully
2025-02-20 09:16:40,728 - src.analysis.feature_importance_analyzer - INFO - Running SHAP analysis...
2025-02-20 09:16:40,729 - src.analysis.feature_importance_analyzer - INFO - Running SHAP analysis...
2025-02-20 09:16:53,714 - src.analysis.feature_importance_analyzer - ERROR - Error in SHAP analysis: object of type 'LinearSegmentedColormap' has no len()
2025-02-20 09:16:53,802 - src.analysis.feature_importance_analyzer - ERROR - Traceback (most recent call last):
  File "/home/dsg/vortex/PRODUCTION/src/analysis/feature_importance_analyzer.py", line 320, in _run_shap_analysis
    shap.summary_plot(
  File "/home/dsg/vortex/venv/lib/python3.10/site-packages/shap/plots/_beeswarm.py", line 883, in summary_legacy
    pl.barh(y_pos, global_shap_values[feature_inds], 0.7, align='center', color=color)
  File "/home/dsg/vortex/venv/lib/python3.10/site-packages/matplotlib/pyplot.py", line 2373, in barh
    return gca().barh(
  File "/home/dsg/vortex/venv/lib/python3.10/site-packages/matplotlib/axes/_axes.py", line 2615, in barh
    patches = self.bar(x=left, height=height, width=width, bottom=y,
  File "/home/dsg/vortex/venv/lib/python3.10/site-packages/matplotlib/__init__.py", line 1423, in inner
    return func(ax, *map(sanitize_sequence, args), **kwargs)
  File "/home/dsg/vortex/venv/lib/python3.10/site-packages/matplotlib/axes/_axes.py", line 2407, in bar
    color = itertools.chain(itertools.cycle(mcolors.to_rgba_array(color)),
  File "/home/dsg/vortex/venv/lib/python3.10/site-packages/matplotlib/colors.py", line 473, in to_rgba_array
    if len(c) == 0:
TypeError: object of type 'LinearSegmentedColormap' has no len()

2025-02-20 09:16:53,802 - src.analysis.feature_importance_analyzer - ERROR - Error in feature importance analysis: object of type 'LinearSegmentedColormap' has no len()
2025-02-20 09:16:53,803 - src.analysis.feature_importance_analyzer - ERROR - Traceback (most recent call last):
  File "/home/dsg/vortex/PRODUCTION/src/analysis/feature_importance_analyzer.py", line 79, in analyze_feature_importance
    self._run_shap_analysis(model, X)
  File "/home/dsg/vortex/PRODUCTION/src/analysis/feature_importance_analyzer.py", line 320, in _run_shap_analysis
    shap.summary_plot(
  File "/home/dsg/vortex/venv/lib/python3.10/site-packages/shap/plots/_beeswarm.py", line 883, in summary_legacy
    pl.barh(y_pos, global_shap_values[feature_inds], 0.7, align='center', color=color)
  File "/home/dsg/vortex/venv/lib/python3.10/site-packages/matplotlib/pyplot.py", line 2373, in barh
    return gca().barh(
  File "/home/dsg/vortex/venv/lib/python3.10/site-packages/matplotlib/axes/_axes.py", line 2615, in barh
    patches = self.bar(x=left, height=height, width=width, bottom=y,
  File "/home/dsg/vortex/venv/lib/python3.10/site-packages/matplotlib/__init__.py", line 1423, in inner
    return func(ax, *map(sanitize_sequence, args), **kwargs)
  File "/home/dsg/vortex/venv/lib/python3.10/site-packages/matplotlib/axes/_axes.py", line 2407, in bar
    color = itertools.chain(itertools.cycle(mcolors.to_rgba_array(color)),
  File "/home/dsg/vortex/venv/lib/python3.10/site-packages/matplotlib/colors.py", line 473, in to_rgba_array
    if len(c) == 0:
TypeError: object of type 'LinearSegmentedColormap' has no len()

2025-02-20 09:16:53,803 - __main__ - ERROR - Error during process: object of type 'LinearSegmentedColormap' has no len()
