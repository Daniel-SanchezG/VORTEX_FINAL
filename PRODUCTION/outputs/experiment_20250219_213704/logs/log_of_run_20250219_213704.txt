2025-02-19 21:37:04,647 - __main__ - INFO - Starting experiment with timestamp: 20250219_213704
2025-02-19 21:37:04,647 - __main__ - INFO - Input file: /home/dsg/vortex/PRODUCTION/DATA/raw/input_data.xlsx
2025-02-19 21:37:04,647 - __main__ - INFO - Output directory: outputs/experiment_20250219_213704
2025-02-19 21:37:04,647 - __main__ - INFO - Starting data preprocessing...
2025-02-19 21:37:06,492 - src.preprocessing.data_processor - INFO - Datos cargados exitosamente: (1816, 67)
2025-02-19 21:37:06,496 - src.preprocessing.data_processor - INFO - Encontrados 14 IDs duplicados
2025-02-19 21:37:06,497 - src.preprocessing.data_processor - INFO - Registros únicos después de eliminar duplicados: 1802
2025-02-19 21:37:06,498 - src.preprocessing.data_processor - INFO - Eliminando 6 clases con menos de 10 casos
2025-02-19 21:37:06,500 - src.preprocessing.data_processor - INFO - División de datos - Entrenamiento: (1600, 47), Validación: (178, 47)
2025-02-19 21:37:06,578 - src.preprocessing.data_processor - INFO - Datos balanceados - Shape final: (2256, 46)
2025-02-19 21:37:08,676 - src.preprocessing.data_processor - INFO - Datos de entrenamiento guardados en outputs/experiment_20250219_213704/data/processed/training_data_20250219_213704.xlsx
2025-02-19 21:37:08,903 - src.preprocessing.data_processor - INFO - Datos de validación guardados en outputs/experiment_20250219_213704/data/processed/validation_data_20250219_213704.xlsx
2025-02-19 21:37:08,904 - __main__ - INFO - Starting model training...
2025-02-19 21:37:08,904 - src.training.model_trainer - INFO - Configuring training experiment...
2025-02-19 21:37:11,757 - src.training.model_trainer - INFO - Experiment configured successfully
2025-02-19 21:37:11,758 - src.training.model_trainer - INFO - Starting model training...
2025-02-19 21:37:21,508 - src.training.model_trainer - INFO - Optimizing hyperparameters...
2025-02-19 21:37:34,115 - src.training.model_trainer - INFO - Saving tuned model before calibration...
2025-02-19 21:37:34,329 - src.training.model_trainer - INFO - Calibrating model probabilities...
2025-02-19 21:37:56,323 - src.training.model_trainer - INFO - Training completed successfully
2025-02-19 21:37:56,323 - src.training.model_trainer - INFO - Evaluating model on validation data...
2025-02-19 21:37:57,425 - src.training.model_trainer - INFO - Evaluation completed
2025-02-19 21:37:57,425 - __main__ - INFO - Starting model training...
2025-02-19 21:37:57,426 - src.training.model_trainer - INFO - Configuring training experiment...
2025-02-19 21:37:58,255 - src.training.model_trainer - INFO - Experiment configured successfully
2025-02-19 21:37:58,255 - src.training.model_trainer - INFO - Starting model training...
2025-02-19 21:38:02,432 - src.training.model_trainer - INFO - Optimizing hyperparameters...
2025-02-19 21:38:15,511 - src.training.model_trainer - INFO - Saving tuned model before calibration...
2025-02-19 21:38:15,729 - src.training.model_trainer - INFO - Calibrating model probabilities...
2025-02-19 21:38:38,061 - src.training.model_trainer - INFO - Training completed successfully
2025-02-19 21:38:38,061 - src.training.model_trainer - INFO - Evaluating model on validation data...
2025-02-19 21:38:38,978 - src.training.model_trainer - INFO - Evaluation completed
2025-02-19 21:38:38,979 - __main__ - INFO - Starting feature importance analysis...
2025-02-19 21:38:38,982 - __main__ - INFO - Retrieving tuned model for feature importance analysis...
2025-02-19 21:38:38,982 - __main__ - INFO - Running feature importance analysis...
2025-02-19 21:38:38,982 - src.analysis.feature_importance_analyzer - INFO - Starting feature importance analysis...
2025-02-19 21:38:38,982 - src.analysis.feature_importance_analyzer - INFO - Data shape: X=(2256, 45), y=(2256,)
2025-02-19 21:38:38,982 - src.analysis.feature_importance_analyzer - INFO - Output directory: outputs/experiment_20250219_213704
2025-02-19 21:38:38,982 - src.analysis.feature_importance_analyzer - INFO - Calculating Random Forest feature importance...
2025-02-19 21:38:39,022 - src.analysis.feature_importance_analyzer - INFO - Creating feature importance plot...
2025-02-19 21:38:39,023 - src.analysis.feature_importance_analyzer - INFO - Creating feature importance dot plot...
2025-02-19 21:38:39,785 - src.analysis.feature_importance_analyzer - INFO - Feature importance plot saved successfully
2025-02-19 21:38:39,785 - src.analysis.feature_importance_analyzer - INFO - Starting RFECV analysis...
2025-02-19 21:38:39,785 - src.analysis.feature_importance_analyzer - INFO - Running RFECV with 10 iterations...
2025-02-19 21:38:39,785 - src.analysis.feature_importance_analyzer - INFO - RFECV iteration 1/10
2025-02-19 21:40:09,708 - src.analysis.feature_importance_analyzer - INFO - Iteration 1 completed: selected 33 features
2025-02-19 21:40:09,708 - src.analysis.feature_importance_analyzer - INFO - RFECV iteration 2/10
2025-02-19 21:41:45,321 - src.analysis.feature_importance_analyzer - INFO - Iteration 2 completed: selected 29 features
2025-02-19 21:41:45,321 - src.analysis.feature_importance_analyzer - INFO - RFECV iteration 3/10
2025-02-19 21:43:17,116 - src.analysis.feature_importance_analyzer - INFO - Iteration 3 completed: selected 33 features
2025-02-19 21:43:17,116 - src.analysis.feature_importance_analyzer - INFO - RFECV iteration 4/10
2025-02-19 21:44:46,432 - src.analysis.feature_importance_analyzer - INFO - Iteration 4 completed: selected 35 features
2025-02-19 21:44:46,432 - src.analysis.feature_importance_analyzer - INFO - RFECV iteration 5/10
2025-02-19 21:46:13,913 - src.analysis.feature_importance_analyzer - INFO - Iteration 5 completed: selected 39 features
2025-02-19 21:46:13,914 - src.analysis.feature_importance_analyzer - INFO - RFECV iteration 6/10
2025-02-19 21:47:39,952 - src.analysis.feature_importance_analyzer - INFO - Iteration 6 completed: selected 42 features
2025-02-19 21:47:39,953 - src.analysis.feature_importance_analyzer - INFO - RFECV iteration 7/10
2025-02-19 21:49:10,816 - src.analysis.feature_importance_analyzer - INFO - Iteration 7 completed: selected 34 features
2025-02-19 21:49:10,816 - src.analysis.feature_importance_analyzer - INFO - RFECV iteration 8/10
2025-02-19 21:51:03,044 - src.analysis.feature_importance_analyzer - INFO - Iteration 8 completed: selected 35 features
2025-02-19 21:51:03,045 - src.analysis.feature_importance_analyzer - INFO - RFECV iteration 9/10
2025-02-19 21:52:45,789 - src.analysis.feature_importance_analyzer - INFO - Iteration 9 completed: selected 35 features
2025-02-19 21:52:45,790 - src.analysis.feature_importance_analyzer - INFO - RFECV iteration 10/10
2025-02-19 21:54:24,925 - src.analysis.feature_importance_analyzer - INFO - Iteration 10 completed: selected 35 features
2025-02-19 21:54:24,943 - src.analysis.feature_importance_analyzer - INFO - Creating RFECV plot...
2025-02-19 21:54:25,864 - src.analysis.feature_importance_analyzer - INFO - RFECV plot saved successfully
2025-02-19 21:54:25,865 - src.analysis.feature_importance_analyzer - INFO - Running SHAP analysis...
2025-02-19 21:54:25,866 - src.analysis.feature_importance_analyzer - INFO - Running SHAP analysis...
2025-02-19 21:54:36,639 - src.analysis.feature_importance_analyzer - ERROR - Error in SHAP analysis: object of type 'LinearSegmentedColormap' has no len()
2025-02-19 21:54:36,654 - src.analysis.feature_importance_analyzer - ERROR - Traceback (most recent call last):
  File "/home/dsg/vortex/PRODUCTION/src/analysis/feature_importance_analyzer.py", line 320, in _run_shap_analysis
    shap.summary_plot(
  File "/home/dsg/vortex/venv/lib/python3.10/site-packages/shap/plots/_beeswarm.py", line 883, in summary_legacy
    pl.barh(y_pos, global_shap_values[feature_inds], 0.7, align='center', color=color)
  File "/home/dsg/vortex/venv/lib/python3.10/site-packages/matplotlib/pyplot.py", line 2373, in barh
    return gca().barh(
  File "/home/dsg/vortex/venv/lib/python3.10/site-packages/matplotlib/axes/_axes.py", line 2615, in barh
    patches = self.bar(x=left, height=height, width=width, bottom=y,
  File "/home/dsg/vortex/venv/lib/python3.10/site-packages/matplotlib/__init__.py", line 1423, in inner
    return func(ax, *map(sanitize_sequence, args), **kwargs)
  File "/home/dsg/vortex/venv/lib/python3.10/site-packages/matplotlib/axes/_axes.py", line 2407, in bar
    color = itertools.chain(itertools.cycle(mcolors.to_rgba_array(color)),
  File "/home/dsg/vortex/venv/lib/python3.10/site-packages/matplotlib/colors.py", line 473, in to_rgba_array
    if len(c) == 0:
TypeError: object of type 'LinearSegmentedColormap' has no len()

2025-02-19 21:54:36,657 - src.analysis.feature_importance_analyzer - ERROR - Error in feature importance analysis: object of type 'LinearSegmentedColormap' has no len()
2025-02-19 21:54:36,658 - src.analysis.feature_importance_analyzer - ERROR - Traceback (most recent call last):
  File "/home/dsg/vortex/PRODUCTION/src/analysis/feature_importance_analyzer.py", line 79, in analyze_feature_importance
    self._run_shap_analysis(model, X)
  File "/home/dsg/vortex/PRODUCTION/src/analysis/feature_importance_analyzer.py", line 320, in _run_shap_analysis
    shap.summary_plot(
  File "/home/dsg/vortex/venv/lib/python3.10/site-packages/shap/plots/_beeswarm.py", line 883, in summary_legacy
    pl.barh(y_pos, global_shap_values[feature_inds], 0.7, align='center', color=color)
  File "/home/dsg/vortex/venv/lib/python3.10/site-packages/matplotlib/pyplot.py", line 2373, in barh
    return gca().barh(
  File "/home/dsg/vortex/venv/lib/python3.10/site-packages/matplotlib/axes/_axes.py", line 2615, in barh
    patches = self.bar(x=left, height=height, width=width, bottom=y,
  File "/home/dsg/vortex/venv/lib/python3.10/site-packages/matplotlib/__init__.py", line 1423, in inner
    return func(ax, *map(sanitize_sequence, args), **kwargs)
  File "/home/dsg/vortex/venv/lib/python3.10/site-packages/matplotlib/axes/_axes.py", line 2407, in bar
    color = itertools.chain(itertools.cycle(mcolors.to_rgba_array(color)),
  File "/home/dsg/vortex/venv/lib/python3.10/site-packages/matplotlib/colors.py", line 473, in to_rgba_array
    if len(c) == 0:
TypeError: object of type 'LinearSegmentedColormap' has no len()

2025-02-19 21:54:36,660 - __main__ - ERROR - Error during process: object of type 'LinearSegmentedColormap' has no len()
